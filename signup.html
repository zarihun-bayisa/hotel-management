<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assest/style.css">
</head>
<body class="signup-page">
    <div class="container" style="max-width: 400px;">
        <div class="card">
            <div class="card-body p-4">
                <form id="signup-form">
                    <div id="alert-message" class="alert" style="display: none;"></div>
                    <h1 class="text-center mb-4">HOTEL MANAGEMENT</h1>
                    <h2 class="card-title text-center mb-4">Sign Up</h2>
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" placeholder="Choose a username" required>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" placeholder="Enter your email" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" placeholder="Create a password" required>
                    </div>
                    <div class="mb-3">
                        <label for="password2" class="form-label">Confirm Password</label>
                        <input type="password" class="form-control" id="password2" placeholder="Confirm your password" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Sign Up</button>
                    <p class="text-center mt-3">Already have an account? <a href="login.html">Login</a></p>
                </form>
            </div>
        </div>
    </div>

    <script>
        const signupForm = document.getElementById('signup-form');
        const usernameInput = document.getElementById('username');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const password2Input = document.getElementById('password2');
        const alertMessage = document.getElementById('alert-message');

        // On page load, check if we have users in localStorage. If not, create a default list.
        if (!localStorage.getItem('registeredUsers')) {
            const defaultUsers = [
                { username: 'admin', email: 'admin@example.com', password: 'password123' },
                { username: 'johndoe', email: 'john.doe@example.com', password: 'securepassword' }
            ];
            localStorage.setItem('registeredUsers', JSON.stringify(defaultUsers));
        }

        // Helper function to display styled alerts
        function showAlert(message, className) {
            alertMessage.textContent = message;
            alertMessage.className = 'alert'; // Reset classes
            alertMessage.classList.add(className);
            alertMessage.style.display = 'block';

            // Hide the alert after 4 seconds
            setTimeout(() => {
                alertMessage.style.display = 'none';
            }, 4000);
        }

        signupForm.addEventListener('submit', function(event) {
            // Prevent the form from submitting the default way
            event.preventDefault();

            const username = usernameInput.value.trim();
            const email = emailInput.value.trim();
            const password = passwordInput.value.trim();
            const password2 = password2Input.value.trim();

            // Validation: Check if passwords match
            if (password !== password2) {
                showAlert('Passwords do not match!', 'alert-danger');
                return; // Stop the submission
            }

            // Get the current list of users from browser storage
            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers'));

            // Check if the username or email already exists
            const userExists = registeredUsers.some(user => user.username.toLowerCase() === username.toLowerCase() || user.email.toLowerCase() === email.toLowerCase());

            if (userExists) {
                showAlert('An account with this username or email already exists!', 'alert-danger');
            } else {
                // Add the new user to the list
                const newUser = { username, email, password };
                registeredUsers.push(newUser);
                // Save the updated list back to storage
                localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                
                showAlert('Account created successfully! You can now log in.', 'alert-success');
                // Optionally, you can clear the form after successful submission
                signupForm.reset();
            }
        });
    </script>
</body>
</html>
